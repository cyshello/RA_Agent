# 회사 현황 및 핵심역량 분석    
system_prompt = """당신은 기업 IR 문서 및 사업 자료를 분석하여
전문가 수준의 기업 분석 보고서를 생성하는 분석 시스템입니다.

입력으로 제공되는 JSON은 사용자가 업로드한 IR deck 및 관련 문서를
OCR 및 구조화하여 생성한 사실 기반 데이터입니다.

중요 원칙:
- 모든 사실, 수치, 지표는 반드시 입력 JSON에 존재하는 값만 사용해야 합니다.
- 특히, 수치에 대한 단위를 반드시 확인하고 입력 JSON에 나타난 단위를 사용해야 합니다.
- 입력 문서에 없는 수치, 성과, 실적은 절대 생성하지 마십시오.
- 단, 전략적 분석, 평가, 단점 도출, 방향성 제안은 전문가라면 합리적으로 도출 가능한 범위 내에서 허용됩니다.
- 전략적 제안은 단정이 아닌 방향성, 권고, 검토 수준으로만 표현해야 합니다.
- 구체적인 정부 정책명, 제도명, 예산 사업명, 공식 프로그램 명칭은 생성하지 마십시오.
- 과도한 세부 설명은 요약하거나 제외해야 합니다.
- 마케팅 문구, 과장된 표현, 성공 보장 표현은 금지됩니다.
- 모든 출력은 한국어로 작성해야 합니다.

문체 규칙 (매우 중요):
- 출력되는 모든 문장은 반드시 명사형으로 종결되어야 합니다.
- 모든 문장은 반드시 "~함" 또는 "~임"으로 끝나야 합니다.
- "~다", "~합니다", "~할 수 있다" 등의 종결형은 절대 사용하지 마십시오.

출력 규칙:
- 출력은 반드시 지정된 JSON 스키마만 사용해야 합니다.
- JSON 외의 설명 문장은 절대 출력하지 마십시오.

당신은 요약기가 아니라,
실제 기업 분석 전문가처럼 논리적이고 일관된 분석을 수행해야 합니다.
"""

competencies_user = """
다음은 특정 기업의 IR deck 및 관련 문서를
페이지 단위로 분석한 JSON 데이터입니다.

이 데이터를 기반으로
"회사현황 및 핵심역량 분석" 보고서를 생성하십시오.

이미지에 나타난 구성 요소를 모두 포함해야 하며,
과도한 세부사항은 요약하거나 제외하십시오.

반드시 다음 항목을 포함해야 합니다:

1. 재무현황
2. 주요성과
3. 비즈니스 모델
4. 핵심역량

출력은 다음과 같은 형식을 따라야 합니다:
- 재무현황은 입력 JSON에서 얻을 수 있는 가장 최신 연도를 기준으로 작성하십시오.
- 매출액, 영업이익, 누적투자 항목은 각각 숫자 형태로 작성하며, 단위는 자료에서 나타난 단위를 그대로 사용하여 통일하십시오.
- 매출액, 영업이익, 누적투자 항목은 반드시 기준 연도의 수치를 사용하며, 반드시 입력 JSON에서 얻을 수 있는 값으로만 작성하십시오. 
- 매출액, 영업이익, 누적투자 항목은 입력 JSON에 정확히 일치하는 값이 없는 경우, 해당 항목은 "알 수 없음" 으로 남겨두십시오.
- 주요성과와 비즈니스 모델의 항목은 각각 3개의 짧은 문장 혹은 키워드로 구성된 리스트 형태로 작성하십시오.
- 핵심역량의 b2g_kewords는 B2G 관련 핵심역량을 나타내는 키워드 리스트로 작성하며, 최대 3개까지 포함하십시오.
- 핵심역량의 evidences는 핵심역량을 뒷받침하는 구체적인 근거를 최대 6개의 문장으로 작성하십시오. 

작성 기준:
- 모든 수치는 입력 JSON과 동일한 값만 사용해야 합니다.
- 핵심역량은 문서 기반 사실을 토대로 전문가적 해석을 추가할 수 있습니다.
- 문서에 없는 사실은 절대 생성하지 마십시오.

"""

competencies_json = """

출력은 반드시 아래 JSON 스키마를 따르십시오.

{
    "재무현황" : {
        "year" : "",
        "매출액" : "",
        "영업이익" : "",
        "누적투자" : ""
    },
    "주요성과" : {
        "contents" : []
    },
    "비즈니스 모델" : {
        "contents" : []
    },
    "핵심역량" : {
        "b2g_keywords" : [],
        "evidences" : []
    }
}

"""

# 사업시장 현황 분석
market_user_internet = """

다음은 특정 기업의 IR deck 및 관련 문서를
페이지 단위로 분석한 JSON 데이터입니다.

이 데이터를 기반으로
"사업시장 현황 분석" 보고서를 생성하십시오.

이미지에 나타난 구성 요소를 모두 포함해야 하며,
시장 분석에 필요한 경우 전문가적 해석을 허용합니다.
이때, 사업시장은 국내인지 해외인지 주어진 JSON 데이터를 토대로 합리적으로 판단하십시오.
시장의 범위를 판단한 후, 해당 범위를 반영하여 분석을 수행하십시오.

반드시 다음 항목을 포함해야 합니다:

1. 시장분석
2. 연도별 시장규모
3. 경쟁구도 및 포지셔닝
4. 기술,정책 트렌드

또한, 각 항목은 다음과 같은 형식을 따라야 합니다:
- 시장분석은 연평균 성장률, 단위, 출처 항목으로 구성하십시오.
- 시장분석의 출처는 반드시 신뢰할 수 있는 외부 출처여야 합니다.
- 시장분석과 연도별 시장규모의 근거를 해당 숫자가 어떻게 도출되었는지 자세하게 작성하십시오.
- 연도별 시장규모는 연도별 시장규모 데이터를 연도-규모 쌍으로 작성하고, 단위와 출처를 반드시 포함하십시오.
- 경쟁구도 및 포지셔닝의 competitors는 주요 경쟁사 리스트로 작성하고, details는 경쟁사들에 대한 구체적인 설명을 최대 2개의 문장으로 작성하십시오.
- 기술, 정책 트랜드의 keywords는 관련 기술 및 정책 트렌드를 나타내는 키워드 리스트로 작성하며, 반드시 최대 6개의 짧은 단어로 구성하십시오.
- 기술, 정책 트랜드의 evidences는 트렌드를 뒷받침하는 구체적인 근거를 최대 6개의 문장으로 작성하며, 각 근거에는 반드시 신뢰할 수 있는 출처를 명시하십시오.
- 마지막으로, 위의 항목을 모두 분석한 이후에 적절한 시장명을 도출하여 "시장명" 항목에 작성하십시오.

작성 기준:
- 시장 규모, 성장률 등 수치는 입력 JSON에 있는 값과 검색을 통해 얻은 신뢰할 수 있는 외부 출처를 기반으로 작성하십시오.
- 입력 JSON에 없는 수치는 검색을 허용합니다. 이 경우, 참고한 외부 출처를 반드시 명시하십시오.
- 경쟁구도 및 차별점은 전문가적 분석을 통해 제안할 수 있습니다.
- 기업이 특정 트렌드를 수행하고 있다고 단정하지 마십시오.

"""

market_user_infer = """

다음은 특정 기업의 IR deck 및 관련 문서를
페이지 단위로 분석한 JSON 데이터입니다.

이 데이터를 기반으로
"사업시장 현황 분석" 보고서를 생성하십시오.

이미지에 나타난 구성 요소를 모두 포함해야 하며,
시장 분석에 필요한 경우 전문가적 해석을 허용합니다.
이때, 사업시장은 국내인지 해외인지 주어진 JSON 데이터를 토대로 합리적으로 판단하십시오.
시장의 범위를 판단한 후, 해당 범위를 반영하여 분석을 수행하십시오.

반드시 다음 항목을 포함해야 합니다:

1. 시장명
2. 시장분석
3. 연도별 시장규모
4. 경쟁구도 및 포지셔닝
5. 기술,정책 트렌드

또한, 각 항목은 다음과 같은 형식을 따라야 합니다:
- 시장분석은 연평균 성장률, 단위, 출처 항목으로 구성하십시오.
- 시장분석의 출처는 반드시 신뢰할 수 있는 외부 출처여야 합니다.
- 시장분석과 연도별 시장규모의 근거를 자세하게 작성하십시오.
- 연도별 시장규모는 연도별 시장규모 데이터를 연도-규모 쌍으로 작성하고, 단위와 출처를 반드시 포함하십시오.
- 경쟁구도 및 포지셔닝의 competitors는 주요 경쟁사 리스트로 작성하고, details는 경쟁사들에 대한 구체적인 설명을 최대 2개의 문장으로 작성하십시오.
- 기술, 정책 트랜드의 keywords는 관련 기술 및 정책 트렌드를 나타내는 키워드 리스트로 작성하며, 반드시 최대 6개의 짧은 단어로 구성하십시오.
- 기술, 정책 트랜드의 evidences는 트렌드를 뒷받침하는 구체적인 근거를 최대 6개의 문장으로 작성하며, 각 근거에는 반드시 신뢰할 수 있는 출처를 명시하십시오.
- 마지막으로, 위의 항목을 모두 분석한 이후에 적절한 시장명을 도출하여 "시장명" 항목에 작성하십시오.

작성 기준:
- 시장 규모, 성장률 등 수치는 입력 JSON에 있는 값과 사전 지식을 이용해 미래의 값을 예측해도 좋습니다. 이 경우, 참고한 사전 지식을 출처로 명시하십시오.
- 경쟁구도 및 차별점은 전문가적 분석을 통해 제안할 수 있습니다.
- 기업이 특정 트렌드를 수행하고 있다고 단정하지 마십시오.

"""

market_json = """

출력은 반드시 아래 JSON 스키마를 따르십시오.

{
  "시장분석": {
    "시장명" : "',
    "연평균 성장률" : "",
    "단위" : "",
    "출처" : "",
    "근거" : ""
  },
  "연도별 시장규모" : {
    "단위" : "",
    "출처" : "",
    "data" : {
      "20xx" : "x",
      "20xx" : "x"
    }
    "근거" : ""
  },
  "경쟁구도 및 포지셔닝" : {
    "competitors" : [],
    "details" : []
  },
  "기술,정책 트렌드" : {
    "keywords" : [],
    "evidences" : [
      {
        "content" : "",
        "source" : ""
      },
      {
        "content" : "",
        "source" : ""
      }
    ]
  }
}

"""

# B2G전략 방향 수립

b2g_strategy_user = """
다음은 특정 기업의 IR deck 및 관련 문서를
페이지 단위로 분석한 JSON 데이터입니다.

이 데이터를 기반으로
"B2G 전략 방향 수립" 보고서를 생성하십시오.

이미지에 나타난 구성 요소를 모두 포함해야 하며,
전문가적 전략 분석 및 To-do 제안을 허용합니다.

반드시 다음 항목을 포함해야 합니다:

1. 약점분석
2. 전략
3. To-do list

출력 내용은 다음을 따라야 합니다:
- 각 항목의 keyword는 분석한 내용을 대표하는 핵심 키워드로, 짧은 문장이나 단어 형태로 작성하십시오.
- 약점분석의 evidences는 분석 내용을 뒷받침하는 구체적인 근거를 최대 4개의 문장으로 작성하십시오.
- 추천전략의 strategy는 keyword를 기반으로 한 전략적 방향성을 한 문장 형태로 작성하십시오.
- 각 항목의 details는 content 혹은 strategy를 보완하는 구체적인 설명이나 세부사항을 최대 2개의 문장으로 작성하십시오.
- To-do-list의 tasks는 실행 가능한 작업 항목으로 구성되며, 각 작업 항목은 content와 details로 구성됩니다. content는 작업의 핵심 내용을 한 문장으로 작성하고, details는 해당 작업을 수행하기 위한 구체적인 단계나 고려사항을 최대 2개의 문장으로 작성하십시오.

작성 기준:
- 약점은 문서 기반 사실과 전문가적 해석을 함께 사용할 수 있습니다.
- 전략은 실행 계획이 아닌 방향성 수준이어야 합니다.
- To-do는 검토·설계·파일럿 수준까지만 허용됩니다.

"""

b2g_strategy_json = """

출력은 반드시 아래 JSON 스키마를 따르십시오.

{
  "약점분석" : {
    "keyword" : "",
    "evidences" : []
  },
  "추천전략" : {
    "keyword" : "",
    "strategy" : "",
    "details" : []
  },
  "To-do-list" : {
    "keyword" : "",
    "tasks" : [
      {
        "content" : "",
        "details" : []
      },
      {
        "content" : "",
        "details" : []
      }
    ]
  }
}
"""

PROMPTS = {
    "competencies": {
        "system": system_prompt,
        "user": competencies_user,
        "json": competencies_json
    },
    "market": {
        "system": system_prompt,
        "user": market_user_internet ,
        "json": market_json
    },
    "b2g_strategy": {
        "system": system_prompt,
        "user": b2g_strategy_user,
        "json": b2g_strategy_json
    }
}