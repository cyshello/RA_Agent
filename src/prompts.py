"""
LangChain 기반 프롬프트 템플릿 모듈

이 모듈은 기업 분석 보고서 생성을 위한 프롬프트들을
LangChain ChatPromptTemplate으로 구조화하여 관리합니다.
"""

from langchain_core.prompts import ChatPromptTemplate


# 공통 시스템 프롬프트
SYSTEM_PROMPT = """당신은 기업에서 제공한 사업 자료를 분석하여
전문가 수준의 기업 분석 보고서를 생성하는 분석 시스템입니다.

입력으로 제공되는 JSON은 사용자가 업로드한 사업 자료를
OCR 및 구조화하여 생성한 사실 기반 데이터입니다.

중요 원칙:
- 모든 사실, 수치, 지표는 반드시 입력 JSON에 존재하는 값만 사용해야 합니다.
- 특히, 수치에 대한 단위를 반드시 확인하고 입력 JSON에 나타난 단위를 사용해야 합니다.
- 입력 문서에 없는 수치, 성과, 실적은 절대 생성하지 마십시오.
- 단, 전략적 분석, 평가, 단점 도출, 방향성 제안은 전문가라면 합리적으로 도출 가능한 범위 내에서 허용됩니다.
- 전략적 제안은 단정이 아닌 방향성, 권고, 검토 수준으로만 표현해야 합니다.
- 구체적인 정부 정책명, 제도명, 예산 사업명, 공식 프로그램 명칭은 생성하지 마십시오.
- 과도한 세부 설명은 요약하거나 제외해야 합니다.
- 마케팅 문구, 과장된 표현, 성공 보장 표현은 금지됩니다.
- 모든 출력은 한국어로 작성해야 합니다.

문체 규칙 (매우 중요):
- 출력되는 모든 문장은 반드시 명사형으로 종결되어야 합니다.
- 모든 문장은 반드시 명사 또는 "~함" 또는 "~임"으로 끝나야 합니다.
- "~다", "~합니다", "~할 수 있다" 등의 종결형은 절대 사용하지 마십시오.

출력 규칙:
- 출력은 반드시 지정된 JSON 스키마만 사용해야 합니다.
- JSON 외의 설명 문장은 절대 출력하지 마십시오.

당신은 요약기가 아니라,
실제 기업 분석 전문가처럼 논리적이고 일관된 분석을 수행해야 합니다.
"""


# 페이지 추출용 프롬프트
EXTRACTION_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 주어진 기업 소개 문서 중 한 페이지를 보고, 해당 페이지 안의 정보를 추출하는 전문가입니다. 페이지 안의 텍스트들은 모두 추출되어 주어지며, 이미지를 보고 슬라이드를 최대한 자세하게 설명하여 아래와 같이 JSON 형식으로 반환하세요.

이때, 다음과 같은 사항을 꼭 지켜주세요.

1. 추출된 텍스트는 이미지의 정보를 담고 있지 못한 순수한 텍스트이므로 이미지를 우선 관찰하여 이미지가 담고 있는 정보를 최대한 많이, 정확하게 반환해야 합니다.

2. 우선 이미지에 포함된 시각적 구성요소들을 구분하고, 각 구성요소들이 담고 있는 텍스트들을 추출된 텍스트에서 참고하여 해당 구성요소가 의미하는 바를 최대한 유추하여 JSON 형식으로 표현하세요.

3. 표, 그래프, 다이어그램 등의 시각적 요소를 설명하기 위해서는 반드시 우선 해당 요소를 설명하고, 그 다음에 구성 요소들을 키-값 쌍으로 표현하세요.
     
예를 들어, 원형 그래프의 여러 요소들을 크기의 차이로 표현하는 그래프가 있다면 다음과 같이 표현합니다.
    "원형 그래프의 이름 또는 역할" : {{
        "설명" : "이 그래프는 ~을 나타내며, 각 요소는 다음과 같습니다.",
        "요소1 이름": "요소1 값(숫자가 주어져 있지 않다면 상대적인 크기 표현)",
        "요소2 이름": "요소2 값",
        ...
    }}

4. 각 페이지의 중심 아이디어를 반드시 포함하세요.
     
5. (매우 중요 - 반드시 준수) 각 페이지에 해당 기업에 대한 매출, 영업이익, 누적투자의 정보가 포함되어 있는지 확인하고 JSON의 "재무현황" 항목에 반드시 포함하세요. 
    - "재무현황" 키는 모든 응답에 반드시 포함되어야 합니다.
    - 해당 정보가 없다면 빈 값("")으로 남겨두세요.
    - 이때, 해당 정보의 기준년도도 반드시 정수로 함께 포함하며 만약 여러 값이 존재한다면 기준 년도가 가장 최신인 값을 사용하세요.
    - 기준년도는 슬라이드에 명시된 연도(예: "2024년 2분기"면 2024)를 사용하고, 명시되지 않았다면 0으로 표기하세요.

6. (매우 중요) 매출, 영업이익, 누적투자의 수치는 반드시 추출된 자료에 언급된 측정된 값이어야 하며, 목표 금액이나 예상금액은 제외하고 실제 달성된 금액만 포함해야 합니다.
     
JSON 스키마 (재무현황은 반드시 포함):
{{
    "구성요소" : "구성 내용" (자유롭게 구성),
    "재무현황" : {{
        "매출": {{
            "기준년도": 연도(정수, 없으면 0),
            "금액": "금액 (없으면 빈 문자열)"
        }},
        "영업이익": {{
            "기준년도": 연도(정수, 없으면 0),
            "금액": "금액 (없으면 빈 문자열)"
        }},
        "누적투자": {{
            "기준년도": 연도(정수, 없으면 0),
            "금액": "금액 (없으면 빈 문자열)"
        }}
    }}
}}

예를 들어서 다음과 같을 수 있습니다.

[예시 1 - 재무 정보가 있는 경우]:
{{
    "중심 아이디어": "이 슬라이드는 ABC 주식회사의 개요를 설명합니다.", 
    "회사명": "ABC 주식회사",
    "설립연도": "1995년",
    "주요 제품": "스마트폰, 태블릿",
    "시장 점유율": "25%",
    "CEO 이름": "홍길동",
    "주요 경쟁사 사용시간" : {{
        "경쟁사 A": "40%",
        "경쟁사 B": "35%",
        "자사": "25%"
    }},
    "재무현황" : {{
        "매출": {{
            "기준년도": 2025,
            "금액": "10조원"
        }},
        "영업이익": {{
            "기준년도": 2025,
            "금액": "5조원"
        }},
        "누적투자": {{
            "기준년도": 2025,
            "금액": "2조원"
        }}
    }}
}}

[예시 2 - 재무 정보가 없는 경우]:
{{
    "중심 아이디어": "이 슬라이드는 ABC 주식회사의 연락처를 설명합니다.", 
    "회사명": "ABC 주식회사",
    "주소": "서울시 강남구",
    "재무현황" : {{
        "매출": {{
            "기준년도": 0,
            "금액": ""
        }},
        "영업이익": {{
            "기준년도": 0,
            "금액": ""
        }},
        "누적투자": {{
            "기준년도": 0,
            "금액": ""
        }}
    }}
}}

이때, 반드시 JSON 형식으로만 응답해 주세요. 추가적인 설명이나 다른 텍스트는 포함하지 마세요.
또한, 대답에는 반드시 모든 추출한 텍스트를 포함하며, 추출한 텍스트 이외의 글자를 읽거나 유추하지 마세요."""),
    ("user", "다음은 이미지에서 추출한 텍스트입니다:\n{ocr_text}\n\n이 텍스트를 바탕으로 아래의 JSON 스키마에 맞추어 정보를 추출해 주세요. 재무현황 항목은 반드시 포함해야 합니다.")
])

#B2G역량 종합 평가 프롬프트 / section 1
OVERALL_COMPETENCY_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """너는 한국 공공조달, 공공기관 경영평가, 국정과제, 동반성장 정책을 이해하는
    B2G 전략 컨설턴트이자 정량 평가 모델 설계자다.

    너의 임무는 입력된 기업 자료(IR, 회사소개서, 특허, 제품 설명 요약 JSON 등)를 기반으로,
    해당 기업의 “공공 진입 가능성과 공공 기여 잠재력”을 평가하는 것이다.

    이 평가는 “이미 공공사업을 수행한 기업”을 평가하는 것이 아니라,
    “아직 공공 실적이 없더라도 공공 영역에 논리적으로 진입 가능하고,
    정책·제도·공공 문제 해결에 기여할 잠재력이 있는 기업”을 평가하는 데 목적이 있다.

    따라서 다음 원칙을 반드시 지켜라.

    [핵심 평가 철학]
    - 실제 공공 계약·입찰·PoC 경험이 없어도 감점 사유가 아니다.
    - 기업 자료에 나타난 기술, 제품, 시장, 고객, 사회적 가치가
    공공 기준과 논리적으로 연결 가능하다면 점수를 부여한다.
    - “자료 부족으로 평가 불가”라는 응답은 절대 하지 않는다.

    [점수 부여 절대 규칙]
    - 0점은 해당 기준과 연결 가능한 단서가 입력 자료에 전혀 없는 경우에만 사용한다.
    - 기업 자료에 단서가 1개라도 있으면 최소 40점을 부여한다.
    - 근거가 약하면 점수는 40점으로 두고, 필요한 추가 자료를 needs_more_data에 명시한다.
    - 존재하지 않는 실적, 기관명, 숫자, 계약 사례를 절대 생성하지 않는다.

    [점수 해석 기준]
    - 40점: 간접적 연관성 존재 (단서 1개 이상)
    - 60점: 공공 활용 가능성을 논리적으로 설명 가능
    - 80점: 공공 활용 시나리오가 명확하거나 유사 레퍼런스 존재
    - 100점: 실제 공공 계약, PoC, 제도 반영 사례 존재
    - 20점: 단서가 매우 약함 (가급적 사용하지 말 것)
    - 0점: 단서가 전혀 없음 (거의 사용하지 말 것)

    [레이더 차트 공통 규칙]
    - 각 축은 반드시 (0, 20, 40, 60, 80, 100) 중 하나로 평가한다.
    - 단서가 1개라도 있으면 최소 40점부터 시작한다.
    - 공공 전용 자료가 없다는 이유만으로 감점하지 않는다.

    [키워드 추출 규칙]
    - 키워드는 기업의 B2G 진입 논리를 대표하는 핵심 개념어만 추출한다.
    - 기술, 정책, 공공 활용 맥락을 동시에 드러내는 명사형 키워드를 사용한다.
    - 5~10개 이내로 간결하게 작성한다.

     """),
    ("user", """아래에 제공되는 기업 자료(JSON 요약)를 바탕으로,
다음 규칙에 따라 점수, 등급, 레이더 차트, 핵심 키워드를 산출하라.

반드시 아래에 지정된 JSON 스키마로만 응답하고,
추가 설명 텍스트는 출력하지 마라.
     
문서 데이터: {document_data}
등급을 매기기 위해 우선 주어진 문서 데이터에서 다음과 같은 단서가 있는지 확인하여라.
- 공공사업을 수행한 실적
- 공공기관과 함께 일한 실적 (공공기관이 고객사이거나, 공공기관과 협업한 사례)

또한, 다음과 같이 정리된 경영평가, 국정과제, 동반성장 평가지표를 참고하여 점수를 산출하여라.

### 국정과제 목록 (정부 정책 방향 참고):
{national_agenda_data}

### 공공기관 경영평가 지표:
{management_eval_data}

### 동반성장 평가지표:
{inclusive_growth_data}
     
---

## 1. 기준 세트별 점수 산출 (0~100)

다음 3개 기준 세트에 대해 점수를 산출한다.

- management_eval: 공공기관 경영평가 기여 가능성
- national_agenda: 국정과제·정책 방향과의 정합성
- co_growth: 동반성장·상생·협력 기여 가능성

각 항목마다 다음을 포함한다.
- score: 0~100 정수
- reason: 왜 이 점수를 부여했는지 2~3문장 설명
- needs_more_data: 점수를 더 높이기 위해 필요한 자료 (없으면 [])

---

## 2. 레이더 차트 5축 점수

다음 5개 축을 각각 (0,20,40,60,80,100) 중 하나로 평가한다.

- 정책정합성
- 공공기관적합도
- 시장성장성
- 동반성장·협력
- 신뢰도·레퍼런스

규칙:
- 단서가 1개라도 있으면 최소 40점
- 공공 실적 부재를 이유로 0점 또는 20점을 주지 않는다

---

## 3. 종합 점수 및 등급 산출

overall_score는 다음 가중합 개념으로 계산된 값이라고 가정한다.
- 경영평가: 40%
- 국정과제: 30%
- 동반성장: 30%

overall_score는 0~100 정수로 작성한다.

등급 기준:
- A: 85~100
- B: 70~84
- C: 50~69
- D: 0~49

reason_summary에는
“왜 이 기업이 현재 등급에 위치하는지”를
공공 진입 단계 관점에서 3~5문장으로 설명한다.

---

## 4. 핵심 키워드 추출

- 기업의 B2G 진입 논리를 대표하는 핵심 키워드를 5~10개 추출한다.
- 해당 기업의 특징과 강점을 잘 드러내는 키워드를 우선 선택한다.
- 기술, 정책, 공공 활용 맥락이 드러나는 명사형 키워드를 사용한다.

---

## 5. 최종 출력 JSON 스키마

아래 스키마만 사용해 출력한다.

{{
  "scores": {{
    "management_eval": {{
      "score": 0,
      "reason": "",
      "needs_more_data": []
    }},
    "national_agenda": {{
      "score": 0,
      "reason": "",
      "needs_more_data": []
    }},
    "co_growth": {{
      "score": 0,
      "reason": "",
      "needs_more_data": []
    }}
  }},
  "radar": [
    {{ "axis": "정책정합성", "score": 0 }},
    {{ "axis": "공공기관적합도", "score": 0 }},
    {{ "axis": "시장성장성", "score": 0 }},
    {{ "axis": "동반성장·협력", "score": 0 }},
    {{ "axis": "신뢰도·레퍼런스", "score": 0 }}
  ],
  "overall": {{
    "overall_score": 0,
    "grade": "",
    "grade_rule": "",
    "reason_summary": "",
    "needs_more_data_global": [],
    "keywords": []
  }}
}}

출력은 반드시 위 JSON 스키마만 사용하십시오.
JSON 외의 설명 문장은 절대 출력하지 마십시오.""") ])


# 회사 현황 및 핵심역량 분석 프롬프트
# section 2
COMPETENCIES_PROMPT = ChatPromptTemplate.from_messages([
    ("system", SYSTEM_PROMPT),
    ("user", """다음은 특정 기업의 기업 자료를
페이지 단위로 분석한 JSON 데이터입니다.

이 데이터를 기반으로
"회사현황 및 핵심역량 분석" 보고서를 생성하십시오.

이미지에 나타난 구성 요소를 모두 포함해야 하며,
과도한 세부사항은 요약하거나 제외하십시오.

반드시 다음 항목을 포함해야 합니다:

1. 주요성과(performance)
2. 비즈니스 모델(BM)
3. 핵심역량(competencies)

출력은 다음과 같은 형식을 따라야 합니다:
- 주요성과와 비즈니스 모델의 항목은 각각 3개의 짧은 문장 혹은 키워드로 구성된 리스트 형태로 작성하십시오.
- 핵심역량의 b2g_kewords는 B2G 관련 핵심역량을 나타내는 키워드 리스트로 작성하며, 최대 3개까지 포함하십시오.
- 핵심역량의 evidences는 핵심역량을 뒷받침하는 구체적인 근거를 최대 6개의 문장으로 작성하십시오. 

작성 기준:
- 모든 수치는 입력 JSON과 동일한 값만 사용해야 합니다.
- 핵심역량은 문서 기반 사실을 토대로 전문가적 해석을 추가할 수 있습니다.
- 문서에 없는 사실은 절대 생성하지 마십시오.

문서 데이터: {document_data}

출력은 반드시 아래 JSON 스키마를 따르십시오.

{{
    "performance" : {{
        "contents" : []
    }},
    "BM" : {{
        "contents" : []
    }},
    "competencies" : {{
        "b2g_keywords" : [],
        "evidences" : []
    }}
}}""")
])


# 사업시장 현황 분석 프롬프트
# section 3
MARKET_PROMPT = ChatPromptTemplate.from_messages([
    ("system", SYSTEM_PROMPT),
    ("user", """다음은 특정 기업의 기업 자료를페이지 단위로 분석한 JSON 데이터입니다.

     이 데이터를 기반으로 "사업시장 현황 분석" 보고서를 생성하십시오.
     시장 분석에 필요한 경우 전문가적 해석을 허용합니다.
이때, 사업시장은 국내인지 해외인지 주어진 JSON 데이터를 토대로 합리적으로 판단하십시오.
검색을 통해 시장의 범위를 판단한 후, 해당 범위를 반영하여 분석을 수행하십시오.

반드시 다음 항목을 포함해야 합니다:

1. 연도별 시장규모 (market_size)
2. 경쟁구도 및 포지셔닝 (competition)
3. 기술,정책 트렌드 (tech_policy_trends)

이를 위해 우선 웹서칭을 수행하여
     
또한, 각 항목은 다음과 같은 형식을 따라야 합니다:
- 연도별 시장규모의 unit은 시장규모의 단위를 작성하십시오.
- 연도별 시장규모의 market_name은 분석한 시장명을 작성하십시오.
- 연도별 시장규모의 reference는 검색에서 사용한 믿을 수 있는 외부 출처를 작성하십시오.
- 연도별 시장규모의 data는 연도별 시장규모 수치를 key-value 쌍으로 작성하십시오. 반드시 숫자로 작성하십시오.
- 경쟁구도 및 포지셔닝의 differentiation은 해당 기업의 차별점을 최대 3개의 문장으로 작성하십시오.
- 경쟁구도 및 포지셔닝의 competitors는 주요 경쟁사 리스트로 작성하고, details는 경쟁사들에 대한 구체적인 설명을 최대 2개의 문장으로 작성하십시오.
- 기술, 정책 트랜드의 keywords는 관련 기술 및 정책 트렌드를 나타내는 키워드 리스트로 작성하며, 반드시 최대 6개의 짧은 단어로 구성하십시오.
- 기술, 정책 트랜드의 evidences는 트렌드를 뒷받침하는 구체적인 근거를 최대 6개의 문장으로 작성하며, 각 근거에는 반드시 신뢰할 수 있는 출처를 명시하십시오.

작성 기준:
- 시장 규모의 수치는 입력 JSON에 있는 값과 검색을 통해 얻은 신뢰할 수 있는 외부 출처를 기반으로 작성하십시오.
- 입력 JSON에 없는 수치는 검색을 허용합니다. 이 경우, 참고한 외부 출처를 반드시 명시하십시오.
- 경쟁구도 및 차별점은 전문가적 분석을 통해 제안할 수 있습니다.
- 기업이 특정 트렌드를 수행하고 있다고 단정하지 마십시오.

문서 데이터: {document_data}

출력은 반드시 아래 JSON 스키마를 따르십시오.

{{
  "market_size" : {{
    "unit" : "",
    "market_name" : "",
    "reference" : "",
    "data" : {{
      "20xx" : "x",
      "20xx" : "x"
    }}
  }},
  "competition" : {{
    "competitors" : [],
    "details" : [],
    "differentiation" : []
  }},
  "tech_policy_trends" : {{
    "keywords" : [],
    "evidences" : [
      {{
        "content" : "",
        "source" : ""
      }},
      {{
        "content" : "",
        "source" : ""
      }}
    ]
  }}
}}""")
])

#section 5
# B2G 전략 방향 수립 프롬프트
B2G_STRATEGY_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 기업에서 제공한 사업 자료를 분석하여
전문가 수준의 기업 분석 보고서를 생성하는 분석 시스템입니다.

입력으로 제공되는 JSON은 사용자가 업로드한 사업 자료를
OCR 및 구조화하여 생성한 사실 기반 데이터입니다.

중요 원칙:
- 모든 사실, 수치, 지표는 반드시 입력 JSON에 존재하는 값만 사용해야 합니다.
- 특히, 수치에 대한 단위를 반드시 확인하고 입력 JSON에 나타난 단위를 사용해야 합니다.
- 입력 문서에 없는 수치, 성과, 실적은 절대 생성하지 마십시오.
- 단, 전략적 분석, 평가, 단점 도출, 방향성 제안은 전문가라면 합리적으로 도출 가능한 범위 내에서 허용됩니다.
- 전략적 제안은 단정이 아닌 방향성, 권고, 검토 수준으로만 표현해야 합니다.
- 구체적인 정부 정책명, 제도명, 예산 사업명, 공식 프로그램 명칭은 생성하지 마십시오.
- 과도한 세부 설명은 요약하거나 제외해야 합니다.
- 마케팅 문구, 과장된 표현, 성공 보장 표현은 금지됩니다.
- 모든 출력은 한국어로 작성해야 합니다.
     
출력 규칙:
- 출력은 반드시 지정된 JSON 스키마만 사용해야 합니다.
- JSON 외의 설명 문장은 절대 출력하지 마십시오.

당신은 요약기가 아니라,
실제 기업 분석 전문가처럼 논리적이고 일관된 분석을 수행해야 합니다.
"""),
    ("user", """
당신은 B2G(공공조달·공공사업) 전략 컨설턴트입니다.
아래 기업 자료를 분석하기 전에, 반드시 **웹서칭을 먼저 수행**하십시오.

────────────────────────
[1단계] 웹서칭 실행 (필수)
다음 검색어를 사용하여 최신 B2G 시장 트렌드와 성공 사례를 조사하십시오.

1. "중소기업 B2G 성공 전략 2024"
2. "[기업 업종] 공공시장 진입 사례"
3. "공공기관 혁신조달 트렌드"

- 웹서칭 결과는 **실제 전략·행동 패턴 도출에 활용**해야 하며,
- 단순 요약이나 형식적 언급에 그쳐서는 안 됩니다.
- 웹서칭 결과와 입력 기업 자료를 **결합하여 분석**하십시오.

────────────────────────
[2단계] 입력 기업 자료 분석

**A. 기업 문서 데이터:**
아래 JSON 데이터는 특정 기업의 내부 자료를
페이지 단위로 분석한 결과입니다.

{document_data}

**B. B2G 역량 레이더 차트 점수:**
기업의 B2G 역량을 5가지 차원으로 평가한 결과입니다.
(점수 범위: 1~5, 높을수록 우수)

{radar_scores}

**C. 세부 평가 점수:**
각 역량 항목별 상세 점수입니다.

{evaluation_scores}

**D. 종합 평가:**
B2G 역량에 대한 종합 평가 결과입니다.

{overall_assessment}

**E. B2G 평가 기준 분석 (Section 4 결과):**
국정과제, 공공기관 경영평가, 동반성장 평가지표와의 정합성 분석 결과입니다.

{b2g_analysis}

────────────────────────
[3단계] 전략 방향성 도출 (핵심 요구사항)

웹서칭 결과 + 기업 자료 + 레이더 차트 점수 + B2G 평가 분석을 종합하여,
이 기업이 B2G 시장에서 가지는 **핵심 약점**을 도출하고,
각 약점에 대해 다음 논리 구조를 따르는 제안을 수행하십시오.

[분석 우선순위]
1. 레이더 차트에서 **점수가 낮은 항목** (3점 미만)을 우선 약점으로 식별
2. Section 4의 B2G 평가 분석에서 도출된 **위험(risk)**을 약점으로 활용
3. Section 4의 **검토 필요 사항(consider)**을 전략 수립에 반영

[논리 구조]
약점(Weakness) →
그 약점을 보완하기 위한 전략 목표(Strategy: What + Why) →
전략을 실행하기 위한 구체적 행동(To-do list: How + When + Who)

────────────────────────
[중요 원칙 – 반드시 준수]

1. 약점 (Weakness)
- B2G 역량 분석에서 드러난 **구체적 취약점**
- **레이더 차트 점수 기반**으로 판단하되, 점수를 절대로 그대로 노출하지 않고 점수가 도출된 이유를 분석하여 사용
- Section 4 분석의 **위험(risk)** 항목 반영
- 예:
  - 공공 레퍼런스 부재 
  - 정책·국정과제 정합성 근거 부족 (국정과제 분석 위험 반영)
  - 동반성장 체계 미흡 (동반성장 평가 분석 위험 반영)

2. 전략 (Strategy)
- 약점을 보완하기 위해 **달성해야 할 상태·목표**
- **Section 4의 인사이트(insight)**를 활용하여 전략 수립
- 반드시 포함:
  - What: 무엇을 달성할 것인가
  - Why: 왜 이 전략이 필요한가
- 실행 방법이 아니라 **방향성과 목표 수준**
- 예:
  - 좋은 전략:
    “지역 교육청 대상 무상 파일럿을 통해 공교육 진입 레퍼런스 확보”
  - 나쁜 전략:
    “공공기관과 협업 추진”, “레퍼런스 확보”

3. To-do list
- 전략을 실행하기 위한 **구체적·즉시 실행 가능한 행동**
- **Section 4의 검토사항(consider)**을 To-do 설계에 반영
- 각 항목은 반드시 다음을 포함:
  - 액션 동사로 시작
  - 구체적 대상 명시 (기관, 프로그램, 자료 등)
  - 실행 시점 또는 우선순위
  - 측정 가능한 결과물
- 추상적 표현(검토, 추진, 강화 등) 사용 금지
- 최소 5개, 최대 8개
- 시간 순서대로 배열 (단기 → 중기 → 장기)

────────────────────────
[출력 구성 요구사항]

- 하나의 출력 JSON 안에,
  약점–전략–To-do 묶음을 **3~5개 수준으로 압축 반영**
- **레이더 차트 점수와 Section 4 분석 결과**를 근거로 활용
- 각 항목의 keyword는 해당 묶음을 대표하는
  짧고 명확한 문장 또는 핵심 키워드로 작성
- 전략과 To-do는 절대 혼용하지 말 것
- 웹서칭에서 확인한 실제 성공 사례의 **행동 패턴**을
  To-do list 설계에 적극 반영할 것
- 자료가 부족한 경우:
  “현재 제공된 자료만으로는 ○○에 대한 신뢰도 높은 판단이 어렵습니다.”
  라고 명시하고, 어떤 추가 자료가 필요한지 제안할 것

────────────────────────
[출력 형식 – 반드시 준수]

출력은 **아래 JSON 스키마만** 사용하십시오.
Markdown, 번호, 설명 문단, 메타 코멘트는 절대 출력하지 마십시오.

{{
  "weakness_analysis" : {{
    "keyword" : "",
    "evidences" : []
  }},
  "strategy" : {{
    "keyword" : "",
    "strategy" : "",
    "details" : []
  }},
  "to_do_list" : {{
    "keyword" : "",
    "tasks" : [
      {{
        "content" : "",
        "details" : []
      }},
      {{
        "content" : "",
        "details" : []
      }}
    ]
  }}
}}
""")
])


# ============================================================================
# 동반성장평가 프롬프트 (2단계 처리)
# ============================================================================

# 1단계: 목록 페이지에서 평가지표 이름 추출
INCLUSIVE_INDEX_EXTRACTION_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 동반성장 평가지표 문서를 분석하는 전문가입니다.
주어진 OCR 텍스트(표 형식)에서 평가지표의 목록을 추출합니다.

중요 원칙:
- 주어진 텍스트는 평가지표 목록/목차 페이지입니다.
- 각 평가지표의 번호와 이름만 추출하세요.
- 세부 내용(평가기준, 평가방법 등)은 이 단계에서 추출하지 않습니다.
- 표에 나타난 지표명을 정확히 그대로 추출하세요.

평가지표 식별 방법:
- 번호 체계: "1", "1-1", "2-3" 등의 형식
- 대분류와 소분류가 있을 수 있음
- 배점 정보가 함께 있을 수 있음

출력은 반드시 JSON 형식으로만 응답하세요.
"""),
    ("user", """OCR 텍스트 (평가지표 목록 페이지 {start_page} ~ {end_page}):
{ocr_text}

위 텍스트에서 모든 평가지표의 번호와 이름을 추출하세요.

{{
    "indicators": [
        {{
            "번호": "1",
            "지표명": "동반성장 전략수립 및 체계",
            "배점": "8점"
        }},
        {{
            "번호": "1-1",
            "지표명": "추진목표·전략 등의 적정성·구체성",
            "배점": "2.0점"
        }},
        ...
    ]
}}""")
])


# 2단계: 세부 페이지에서 각 지표의 상세 정보 추출 (이전 페이지 컨텍스트 포함)
INCLUSIVE_DETAIL_EXTRACTION_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 동반성장 평가지표 문서를 분석하는 전문가입니다.
주어진 OCR 텍스트(표 형식)에서 평가지표의 상세 정보를 추출합니다.

중요 원칙:
- 페이지는 연속되므로, 이전 페이지의 마지막 내용이 현재 페이지로 이어질 수 있습니다.
- 하나의 지표가 여러 페이지에 걸쳐 있을 수 있습니다.
- 현재 페이지에서 새로운 지표가 시작되면 별도로 추출하세요.
- 주어진 "알려진 지표 목록"에 있는 지표명과 매칭하세요.

추출할 필드:
- 평가기준: 평가의 기준이 되는 내용
- 평가방법: 어떻게 평가하는지
- 참고사항: 추가 참고할 내용
- 증빙자료: 필요한 증빙 서류

페이지 연속성 처리:
- 이전 페이지 끝에서 시작된 지표가 현재 페이지에서 계속되면, 해당 지표의 정보를 계속 추출
- 현재 페이지에서 완전히 새로운 지표가 시작되면 새 항목으로 추출

출력은 반드시 JSON 형식으로만 응답하세요.
"""),
    ("user", """## 알려진 평가지표 목록
{indicator_list}

## 이전 페이지 내용 (페이지 {prev_page}):
{prev_page_text}

## 현재 페이지 내용 (페이지 {current_page}):
{current_page_text}

위 내용을 분석하여 현재 페이지에서 발견되는 평가지표의 상세 정보를 추출하세요.
이전 페이지에서 시작된 지표가 계속되는 경우, 해당 지표의 추가 정보도 포함하세요.

{{
    "page_indicators": [
        {{
            "지표명": "알려진 지표 목록에서 매칭되는 정확한 이름",
            "is_continuation": true/false,  // 이전 페이지에서 계속되는 지표인지
            "평가기준": ["이 페이지에서 발견된 평가기준"],
            "평가방법": ["이 페이지에서 발견된 평가방법"],
            "참고사항": ["이 페이지에서 발견된 참고사항"],
            "증빙자료": ["이 페이지에서 발견된 증빙자료"]
        }}
    ]
}}""")
])


# 3단계: 벌크 구조화 프롬프트 (여러 페이지를 한 번에 처리)
INCLUSIVE_BULK_STRUCTURING_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 동반성장 평가지표 문서를 분석하는 전문가입니다.
주어진 OCR 텍스트에서 모든 평가지표의 상세 정보를 추출합니다.

중요 원칙:
- 주어진 텍스트에서 발견되는 모든 평가지표를 추출하세요.
- 각 지표의 평가기준, 평가방법, 참고사항, 증빙자료를 모두 추출하세요.
- 문서에 명시된 내용만 추출하고, 없는 정보는 생성하지 마세요.

출력은 반드시 JSON 형식으로만 응답하세요.
"""),
    ("user", """OCR 텍스트 (페이지 {start_page} ~ {end_page}):
{ocr_text}

위 텍스트에서 모든 평가지표의 상세 정보를 추출하세요.

{{
    "indicators": [
        {{
            "지표명": "평가지표 이름",
            "평가기준": ["평가기준 1", "평가기준 2"],
            "평가방법": ["평가방법 1", "평가방법 2"],
            "참고사항": ["참고사항 1", "참고사항 2"],
            "증빙자료": ["증빙자료 1", "증빙자료 2"]
        }}
    ]
}}""")
])


# ============================================================================
# 국정과제 검색 및 랭킹용 프롬프트
# ============================================================================

# 기업 특징 추출 프롬프트 (국정과제 검색용 쿼리 생성)
COMPANY_FEATURE_EXTRACTION_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 기업 분석 전문가입니다.
주어진 기업 문서 분석 결과를 바탕으로, 이 기업이 기여할 수 있는 국정과제를 검색하기 위한 핵심 키워드와 특징을 추출합니다.

추출 원칙:
1. 기업의 핵심 기술, 제품, 서비스 분야를 파악
2. 기업이 해결하는 사회적/산업적 문제 식별
3. 기업의 강점과 차별화 요소 파악
4. 정부 정책과 연계 가능한 분야 도출

출력은 반드시 JSON 형식으로, 국정과제 검색에 사용할 키워드들을 반환합니다."""),
    ("user", """기업명: {company_name}

기업 문서 분석 결과:
{document_data}

위 기업 정보를 분석하여 국정과제 검색에 사용할 키워드를 추출하세요.
검색 효율을 위해 3-5개의 핵심 검색 쿼리를 생성하세요.

출력 JSON 형식:
{{
    "company_summary": "기업의 핵심 사업 요약 (1-2문장)",
    "core_technologies": ["핵심 기술 키워드 리스트"],
    "target_sectors": ["타겟 산업/분야 리스트"],
    "social_values": ["사회적 가치/기여 분야 리스트"],
    "search_queries": ["국정과제 검색용 쿼리 1", "검색 쿼리 2", "검색 쿼리 3"]
}}""")
])


# B2G 평가 분석 통합 프롬프트 (국정과제, 경영평가, 동반성장 공통)
# section 4
B2G_EVALUATION_RANK_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """
당신은 B2G(Business-to-Government) 전략 컨설턴트입니다.
기업 자료, 공공기관 평가 기준, 그리고 웹서칭을 통해 확인한 최신 우수사례를 결합하여
공공기관 관점에서 신뢰 가능한 평가 분석을 수행합니다.

절대 지켜야 할 원칙:
- 등급은 반드시 명시된 Rubric 기준에 근거하여 산정
- 웹서칭은 보조 수단이며, Rubric을 대체할 수 없음
- 근거 없는 S/A 등급 부여 금지
- 자료가 부족하면 반드시 한계를 명시
"""),

    ("user", """

[중요 원칙 – 절대 생략 금지]

본 섹션의 등급 산정 은 반드시 다음 **2가지 기준을 결합**하여 판단합니다.

1. 내장된 B2G 역량 평가 Rubric (기본 기준)
2. 웹서칭을 통한 실제 우수사례 벤치마킹 (보완 기준

웹서칭 결과는 Rubric 판단을 '보정'하는 역할만 수행하며,
Rubric 기준을 충족하지 못한 항목을 웹서칭만으로 S/A 등급으로 끌어올리는 것은 허용되지 않습니다.

────────────────────────
[B2G 역량 평가 Rubric – 5개 축 + 등급 정의]

■ 축 1: 정책정합성 (Policy Alignment)
- S등급(100점):
  국정과제·공공기관 평가지표에 **직접 명시된 키워드와 정확히 일치**하며,
  실제 공공 계약 또는 납품 이력 보유
- A등급(80점):
  정책 방향과 명확히 일치하며,
  공공 PoC·테스트베드·시범사업 경험 보유
- B등급(60점):
  정책 키워드와 논리적 연결 가능,
  민간 레퍼런스는 풍부하나 공공 실적은 제한적
- C등급(40점):
  간접적 연관성만 존재
- D등급(20점 이하):
  정책과의 연결 근거가 매우 약함

■ 축 2: 공공기관 적합도 (Public Sector Fit)
- S등급:
  공공기관 특화 기능 보유 +
  공공 보안·규제 준수 인증 보유
- A등급:
  공공 도입 시나리오 명확 +
  유사 공공기관 도입 사례 존재
- B등급:
  공공 도입 가능성을 논리적으로 설명 가능
- C등급:
  민간 중심이나 공공 변형 가능
- D등급:
  공공 적합성 낮음

■ 축 3: 시장 성장성 (Market Growth)
- S등급:
  해당 분야 시장 연평균 15% 이상 성장 +
  정부 예산 증액 추세 확인
- A등급:
  연평균 10% 이상 성장 +
  정책적 지원 존재
- B등급:
  시장 성장세 존재 +
  공공 수요 예측 가능
- C등급:
  시장 안정 또는 완만한 성장
- D등급:
  시장 정체 또는 축소

■ 축 4: 동반성장·협력 (Co-growth & Partnership)
- S등급:
  중소기업 지원 프로그램 운영 +
  상생협력 인증 보유
- A등급:
  협력사 네트워크 명확 +
  상생 모델 구체화
- B등급:
  협력 의지 존재 +
  일부 파트너십 보유
- C등급:
  협력 계획은 있으나 실적 미흡
- D등급:
  독자 사업 모델,
  협력 구조 부재

[동반성장 정책 참고사항 - 평가 시 반드시 고려]
다음은 정부의 대·중소기업 상생협력 정책 방향입니다. 기업 평가 시 이 정책과의 연계성을 고려하세요.

1. 성과 공유·확산 정책
   - 대기업 중심의 수주·수출 성과를 중소기업과 직접 공유·확산
   - 해외 동반진출 시 정부 지원: 3년간 최대 20억원 지원 및 보증 200억원 연계
   - 수출지원기관을 통한 대·중소 협력 프로젝트 금융 우대

2. 상생금융 프로그램
   - 대기업·금융권이 출연하고 보증기관이 연계하여 협력사 지원
   - 상생협력기금: 향후 5년간 1.5조원 이상 조성 목표 (연평균 3,000억원 이상)
   - 상생협력 출연 시 세액공제: 중소기업 지원 10%, 중견기업 지원 5%

3. 성과공유제·납품대금연동제
   - 적용대상: 수·위탁 거래 → 플랫폼·유통·대리점 등 모든 기업간 거래로 확대
   - 공동 기술개발·협업을 통한 대→중소기업 환류 경로 강화

4. 동반성장평가 확대
   - 대상: 현행 134개 기관 → 전체 공공기관으로 단계적 확대
   - 온라인플랫폼 기업도 동반성장지수 평가 대상에 추가

5. 분야별 상생협력 확장
   - 플랫폼: 배달플랫폼 수수료 부담 완화, 온라인플랫폼 동반성장지수 평가
   - 금융: 상생금융지수 도입, 포용·생산적금융 자금공급 확대
   - 방산: 방위산업 상생수준평가 신설 (15개사 대상)
   - 원전: 중소·중견기업 공급망 강화 및 해외진출 지원 (45.3억원)
   - 기후: 대기업-협력업체 공동 탄소감축 투자 이차보전 (최대 2.6조원)
   - 지역: 지방정부 중소기업·특화산업과 대기업 매칭 지원

6. 중소기업 보호 강화
   - 중소기업협동조합에 협의요청권 부여
   - 기술탈취 대응: 한국형 증거개시제도 도입, 자료제출 명령권 신설

■ 축 5: 신뢰도·레퍼런스 (Credibility & Track Record)
- S등급:
  공공기관 납품 실적 3건 이상 +
  정부 인증·선정 이력 보유
- A등급:
  대기업·준공공 레퍼런스 2건 이상 +
  수상·선정 이력
- B등급:
  민간 레퍼런스 풍부 +
  특허·인증 보유
- C등급:
  레퍼런스 일부 보유
- D등급:
  레퍼런스 매우 부족

────────────────────────
[등급 산정 프로세스 – 반드시 순서대로 수행]

1단계: 기업 자료 + 문서 분석 결과에서
       각 축별 증거 추출

2단계: 위 Rubric 기준에 따라
       축별 1차 등급 판단

3단계: 웹서칭 실행 (필수)
   검색어:
   - "{eval_type_name} 우수사례"
   - "{eval_type_name} 공공기관 도입 사례"
   - "{eval_type_name} 정부 지원 사업"

4단계: 웹서칭으로 확인한
       실제 S/A등급 기업의 수준과 비교하여
       과대/과소 평가 여부 점검

5단계: 최종 등급 확정 및 근거 작성
   반드시 포함:
   - 기업 자료 근거 (예: IR p.4, 특허, PoC 이력)
   - Rubric 기준 인용
     (예: 정책정합성 A등급 – 국정과제 키워드 3개 일치)
   - 웹서칭 벤치마킹 근거
     (예: ○○기관 △△사업 사례)

웹서칭 결과가 부족한 경우:
"[웹서칭 수행했으나 관련 우수사례 부족,
Rubric 기준으로 평가]"라고 명시하십시오.

────────────────────────
[입력 기업 정보]

기업명: {company_name}
기업 요약: {company_summary}
핵심 기술: {core_technologies}
타겟 산업: {target_sectors}

────────────────────────
[기업 문서 분석 결과 – Raw 참고 자료]

{document_data}

────────────────────────
[검색된 {eval_type_name} 관련 항목 (상위 20개)]

{items_list}
────────────────────────
[출력 요구사항 – 형식 엄수]

[중요] 주어진 상위 20개의 항목 중에서 해당 기업과 관련이 높은 10개의 항목을 우선 선정하세요.
과제와 기업 특징을 잘 읽어보고 반드시 10개만 선정해야 합니다.

이제 선정된 10개의 항목에 대해 주어진 rubric을 이용해 등급을 매겨 각 항목에 대해 "rank" 부분에 S/A 등급을 부여하십시오.
반드시 모든 10개의 항목을 채점하고, "top10" 항목의 배열에 rank가 높은 순서대로 나열하십시오.
이때, 선택된 10개의 항목은 이미 전체 항목 중에 해당 기업에 가장 적합한 항목들로 선별되어 있는 것을 고려하여 최대한 연관점을 찾아 Rank를 산정하십시오.

[문체 규칙 - 반드시 준수]
- description은 반드시 "~합니다." 또는 "~입니다."와 같은 경어체로 작성하십시오.
- "~임.", "~함.", "~됨." 등의 명사형 종결은 절대 사용하지 마십시오.

아래 JSON 스키마를 **절대 변경하지 말고** 출력하십시오.

{{
  "top10": [
    {{
      "rank": "S/A",
      "name": "항목명 (원본 그대로)",
      "description": "기업과의 연관성 및 공공기관 평가 관점 설명 (2-3문장, 반드시 ~합니다/~입니다 문체)"
    }}
  ],
}}

Markdown, 메타 설명, 추가 텍스트 출력 금지.
""")
])

B2G_EVALUATION_ANALYSIS_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 기업에서 제공한 사업 자료를 분석하여
전문가 수준의 기업 분석 보고서를 생성하는 분석 시스템입니다.

입력으로 제공되는 JSON은 사용자가 업로드한 사업 자료를
OCR 및 구조화하여 생성한 사실 기반 데이터입니다.

중요 원칙:
- 모든 사실, 수치, 지표는 반드시 입력 JSON에 존재하는 값만 사용해야 합니다.
- 특히, 수치에 대한 단위를 반드시 확인하고 입력 JSON에 나타난 단위를 사용해야 합니다.
- 입력 문서에 없는 수치, 성과, 실적은 절대 생성하지 마십시오.
- 단, 전략적 분석, 평가, 단점 도출, 방향성 제안은 전문가라면 합리적으로 도출 가능한 범위 내에서 허용됩니다.
- 전략적 제안은 단정이 아닌 방향성, 권고, 검토 수준으로만 표현해야 합니다.
- 구체적인 정부 정책명, 제도명, 예산 사업명, 공식 프로그램 명칭은 생성하지 마십시오.
- 과도한 세부 설명은 요약하거나 제외해야 합니다.
- 마케팅 문구, 과장된 표현, 성공 보장 표현은 금지됩니다.
- 모든 출력은 한국어로 작성해야 합니다.

출력 규칙:
- 출력은 반드시 지정된 JSON 스키마만 사용해야 합니다.
- JSON 외의 설명 문장은 절대 출력하지 마십시오.

당신은 요약기가 아니라,
실제 기업 분석 전문가처럼 논리적이고 일관된 분석을 수행해야 합니다.
"""),
    ("user", """다음은 특정 기업의 {eval_type_name}과의 적합성을 측정한 결과입니다.
     이 결과에는 {eval_type_name}의 상위 10개 항목에 대한 랭킹과 분석이 포함되어 있습니다.

     {b2g_evaluation_rank_result}

     또한, 다음은 해당 기업의 자료(IR deck, 재무제표, 서비스소개서 등)를 분석한 JSON입니다.

     {document_data}

    이 결과를 바탕으로, 기업의 B2G 평가 분석을 생성하십시오. 생성해야 하는 분석에는 다음이 포함되어야 합니다:
     1: 인사이트 (insight)
    제목: 웹서칭으로 확인한 2024-2025 {eval_type_name} 트렌드
    본문: [검색 결과 요약 + 이 기업과의 연결점]
    이 기업의 사업/기술이 {eval_type_name}의 어떤 방향성과 맞닿아 있는지 분석
    정책 트렌드와 기업 역량의 연결점 3~5개 불릿으로 제시
    상위 10개의 {eval_type_name} 달성에 기여할 수 있는 구체적 시나리오 2~3개 제시
    2: 리스크 (risk)
    {eval_type_name} 관점에서 이 기업이 주의해야 할 리스크 3~5개
    정책 변화 가능성, 경쟁 심화, 기술 적합성 이슈 등
    웹서칭으로 확인된 최신 정책 변화 반영
    3: 고려할 부분 (consider)
    상위 10개의 {eval_type_name} 기여도를 높이기 위한 권장사항 3~5개
    추가 확보해야 할 자료/인증/레퍼런스 등
    웹서칭 결과 기반 우수사례의 공통 준비사항 명시
     
     출력은 반드시 아래와 같은 JSON 스키마로 하십시오.
     이때, 문체는 반드시 title은 짧은 명사형 문장으로, detail은 ~입니다. 와 같은 문장으로 작성하십시오.

     {{
      "analysis": {{
      "insight": {{
        "title": "전체 평가를 관통하는 핵심 인사이트",
        "details": [
          "Rubric 기준상 강점 요약",
          "웹서칭으로 확인한 정책·우수사례 트렌드와의 연결",
          "공공기관이 이 기업을 선택할 수 있는 논리"
        ]
      }},
      "risk": {{
        "title": "공공기관 평가 관점의 핵심 리스크",
        "details": [
          "Rubric 기준상 취약 축",
          "정책·평가 환경 변화로 인한 위험",
          "보완하지 않을 경우 발생 가능한 문제"
        ]
      }},
      "consider": [
        "공공기관 평가위원 관점에서의 질문 1?",
        "공공기관 평가위원 관점에서의 질문 2?"
      ]
    }}
     }}
     """)
])

# section 4 분석 요약
B2G_EVALUATION_SUMMARY_PROMPT = ChatPromptTemplate.from_messages([
    ("system", """당신은 기업에서 제공한 사업 자료를 분석하여 기업을 항목별로 평가하고 등급을 매기는 전문가입니다.
   
입력으로 제공되는 JSON은 사용자가 업로드한 사업 자료를
OCR 및 구조화하여 생성한 사실 기반 데이터입니다.


출력 규칙:
- 출력은 반드시 지정된 JSON 스키마만 사용해야 합니다.
- JSON 외의 설명 문장은 절대 출력하지 마십시오.

당신은 요약기가 아니라,
실제 기업 분석 전문가처럼 논리적이고 일관된 분석을 수행해야 합니다.
"""),
    ("user", """
    다음은 특정 기업의 경영평가, 국정과제, 동반성장 평가지표와의 적합성을 측정한 결과입니다.
    이 결과에는 각 평가의 상위 10개 항목에 대한 랭킹 분석이 포함되어 있습니다.

     {b2g_evaluation_rank_result}

     또한 다음은 각 평가의 요약 결과이며, 각 평가를 기준으로 한 이 기업의 종합 등급과 인사이트, 리스크 및 고려할 점을 담고 있습니다.

     {b2g_analysis}

     또한, 다음은 해당 기업의 자료(IR deck, 재무제표, 서비스소개서 등)를 분석한 JSON입니다.

     {document_data}
    
     기대할 수 있는 효과 (expect)는 공공기관이 이 기업과 협업했을 때 기대할 수 있는 효과를 불릿 3~5개로 정리합니다.
    웹서칭으로 확인된 유사 사례의 성과도 참고하여 구체적으로 작성합니다.
     
    출력은 항상 다음과 같은 JSON 스키마로 하십시오.  
    {{
      "expect" : []
    }}
""")
])


# 프롬프트 딕셔너리
PROMPTS = {
    "extraction": EXTRACTION_PROMPT,
    "overall_competency": OVERALL_COMPETENCY_PROMPT,
    "competencies": COMPETENCIES_PROMPT,
    "market": MARKET_PROMPT,
    "b2g_strategy": B2G_STRATEGY_PROMPT,
    # 동반성장 평가지표용 프롬프트 (3단계 처리)
    "inclusive_index_extraction": INCLUSIVE_INDEX_EXTRACTION_PROMPT,
    "inclusive_detail_extraction": INCLUSIVE_DETAIL_EXTRACTION_PROMPT,
    "inclusive_bulk_structuring": INCLUSIVE_BULK_STRUCTURING_PROMPT,
    # 국정과제/경영평가/동반성장 통합 검색 및 분석용 프롬프트 (Section 4 - 3단계)
    "company_feature_extraction": COMPANY_FEATURE_EXTRACTION_PROMPT,
    "b2g_evaluation_rank": B2G_EVALUATION_RANK_PROMPT,           # Step A: 랭킹 생성
    "b2g_evaluation_analysis": B2G_EVALUATION_ANALYSIS_PROMPT,   # Step B: 분석 생성
    "b2g_evaluation_summary": B2G_EVALUATION_SUMMARY_PROMPT,     # Step C: 종합 요약
}
